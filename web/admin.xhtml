<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <h:outputStylesheet  name="css/admin.css"/>
    </h:head>
    <h:body>
        <h:outputScript library="js" name="form.js" />

        <h:form>        
            <h:commandButton class="back" value="back"  action="index"/>
        </h:form> 
        <div class="back-text">BACK</div>

        <div id="login-wrapper">
            <h:form class="login-form">

                <div class="header">
                    <h1>LOG IN</h1>
                    <span>Fill out the form below to login to your  store/s.</span>
                </div>

                <div class="content">
                    <h:inputText p:placeholder="Admin Name" class="input login-username" id="inputText" value="#{adminBean.name}" onfocus="this.value = ''"/>
                    <h:inputSecret p:placeholder="Password" redisplay="true" class="input login-password" value="#{adminBean.password}" onfocus="this.value = ''" />
                </div>

                <div class="footer">
                    <h:commandButton class="button" style="cursor:pointer;" action="#{adminBean.adminLogin}" value="Login">
                        <f:ajax render=":error-message" execute="@form"/>
                    </h:commandButton>
                    <div  onClick="switchMode('register-wrapper', 'login-wrapper')" class="register">Register</div>
                </div>
            </h:form>

        </div>

        <div id="register-wrapper">
            <div class="first-name">Credit Card</div>
            <div class="registration-explanantion"> <span style="position: absolute; left: -12px;">*</span> Registration allows you create new stores...</div>

            <h:form  class="login-form register-form">

                <div class="header">
                    <h1>REGISTER</h1>
                    <span>Fill out the form below to login to your  store/s.</span>
                </div>

                <div class="content">
                    <h:inputText p:placeholder="Admin Name"  class="input register-username" value="#{adminBean.name}"  onfocus="this.value = ''" />
                    <h:inputSecret p:placeholder="Password" redisplay="true" value="#{adminBean.password}" class="input register-password"  onfocus="this.value = ''" />
                </div>

                <div class="footer">
                    <h:commandButton class="button" style="cursor:pointer;" action="#{adminBean.adminRegister}" value="Register">
                        <f:ajax render=":error-message" execute="@form"/>
                    </h:commandButton>
                    <div onClick="switchMode('login-wrapper', 'register-wrapper')" class="switch-to-login register"> Login</div>
                </div>
            </h:form>

        </div>

        <div class="gradient"></div>
        <h:form id="error-message" >
            <div class="error-message-wrapper"></div>
            <script>
                if ('#{adminBean.errorMessage}'.length > 0) {
                    displayErrorMessage('#{adminBean.errorMessage}');
                }

                function displayErrorMessage(errorMessage) {
                    var divToAdd = document.createElement('div');
                    divToAdd.className = 'error-message';
                    divToAdd.innerHTML = errorMessage;
                    var msgWrapperElement = document.querySelector('.error-message-wrapper');
                    msgWrapperElement.appendChild(divToAdd)
                }
            </script>
        </h:form>
    </h:body>


</html>

